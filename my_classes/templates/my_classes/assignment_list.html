<!DOCTYPE html>
<html lang="uk">
<head>
    <meta charset="UTF-8">
    <title>–ó–∞–≤–¥–∞–Ω–Ω—è</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap-icons/font/bootstrap-icons.css" rel="stylesheet">
    <style>
        body {
            background-color: #f0f8ff;
        }

        .icon-circle {
            width: 40px;
            height: 40px;
            border-radius: 50%;
            font-size: 18px;
            box-shadow: 0 0 4px rgba(0, 0, 0, 0.1);
            background-color: #FFB200;
        }

        .assignment-box:hover {
            background-color: #e6f0ff;
            transition: 0.3s ease;
        }

        .assignment-details {
            transition: all 0.3s ease-in-out;
            background-color: #ffffff;
        }

        .text-blue {
            color: #0d6efd;
        }

        .bg-soft-blue {
            background-color: #eaf4ff;
        }

        .bg-soft-green {
            background-color: #eaffea;
        }

        .bg-soft-yellow {
            background-color: #fffbe6;
        }
    </style>
</head>
<body>
<div class="container py-5">
    <div class="d-flex justify-content-between align-items-center mb-4">
        <a href="{% url 'add_assignment' class_id=school_class.id %}" class="btn btn-outline-primary">‚ûï –î–æ–¥–∞—Ç–∏ –∑–∞–≤–¥–∞–Ω–Ω—è</a>
    </div>

    {% if assignments %}
        <ul class="list-group">
            {% for assignment in assignments %}
                <li class="list-group-item d-flex flex-column shadow-sm rounded mb-3 px-3 py-3 bg-soft-blue">
                    <div class="d-flex justify-content-between align-items-center assignment-box" data-target="submissions-{{ assignment.id }}" style="cursor: pointer;">
                        <div class="d-flex align-items-center gap-3">
                          <div class="d-flex align-items-center justify-content-center"
                             style="width: 40px; height: 40px; border-radius: 50%; background-color: #FCC6FF; color: #000;">
                          <i class="bi bi-clipboard-check"></i>
                        </div>
                            <div>
                                <div class="fw-bold text-blue">{{ assignment.title }}</div>
                            </div>
                        </div>
                        <div class="text-muted small">
                            <p>–ß–∞—Å –ø—É–±–ª—ñ–∫–∞—Ü—ñ—ó: {{ assignment.created_at }}</p>
                        </div>
                    </div>

                    <div class="collapse assignment-details mt-3 p-4 border rounded shadow-sm" id="submissions-{{ assignment.id }}">
                        <div class="d-flex justify-content-between align-items-start mb-3">
                            <div>
                                <div class="text-muted small">
                                    {% if assignment.deadline %}
                                        <p><strong>‚è∞ –î–µ–¥–ª–∞–π–Ω:</strong> {{ assignment.deadline|date:"d-m-Y H:i" }}</p>
                                    {% else %}
                                        <p>‚è∞ –ë–µ–∑ —Å—Ä–æ–∫–∞ –∑–¥–∞—á–∏ </p>
                                    {% endif %}
                                </div>
                                <div class="mb-2">{{ assignment.instructions }}</div>
                            </div>
                            <div class="d-flex gap-4 text-center">
                                <div class="bg-soft-green px-3 py-2 rounded">
                                    <div class="h5 mb-0">{{ assignment.submissions.count }}</div>
                                    <div class="text-muted small">–ó–¥–∞–Ω–æ</div>
                                </div>
                                <div class="bg-soft-yellow px-3 py-2 rounded">
                                    <div class="h5 mb-0">0</div>
                                    <div class="text-muted small">–ù–∞–∑–Ω–∞—á–µ–Ω–æ</div>
                                </div>
                            </div>
                        </div>

                        <div class="d-flex justify-content-between align-items-center border-top pt-3">
                            <a href="{% url 'view_assignment' assignment.id %}" class="text-primary small">üìÑ –Ü–Ω—Å—Ç—Ä—É–∫—Ü—ñ—è</a>
                            <a href="{% url 'grade_submissions' assignment.id %}" class="btn btn-sm btn-primary">–û—Ü—ñ–Ω–∏—Ç–∏ —Ä–æ–±–æ—Ç—É</a>
                        </div>
                    </div>
                </li>
            {% endfor %}
        </ul>
    {% else %}
        <p class="text-muted">–©–µ –Ω–µ–º–∞—î –∂–æ–¥–Ω–æ–≥–æ –∑–∞–≤–¥–∞–Ω–Ω—è.</p>
    {% endif %}
</div>

<script>
    document.querySelectorAll('.assignment-box').forEach(item => {
        item.addEventListener('click', function () {
            const targetId = this.getAttribute('data-target');
            const target = document.getElementById(targetId);
            target.classList.toggle('show');
        });
    });
</script>
</body>
</html>
