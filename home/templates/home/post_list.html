{% extends "home/base.html" %}

{% block title %}Пости{% endblock %}

{% block content %}
 {% load static %}
<link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css" rel="stylesheet">
<h1 class="text-center mb-4">Пости вчителів</h1>

<ul class="list-group">
    {% for post in posts %}
        <li class="list-group-item mb-4 shadow-sm rounded">
            <h2 class="h4">{{ post.title }}</h2>
            <p>{{ post.description }}</p>

            {% if post.photo %}
                <img src="{{ post.photo.url }}" alt="Фото поста" class="img-fluid mb-3" style="max-width: 150px;">
            {% endif %}

            <p class="text-muted">Автор: {{ post.author.username }} | Дата: {{ post.created_at }}</p>

            {% if post.author == request.user %}
                <form method="POST" action="{% url 'delete_post' post.id %}" style="display:inline;">
                    {% csrf_token %}
                    <button type="submit" class="btn btn-danger btn-sm">
                        <i class="fas fa-trash"></i> Видалити
                    </button>
                </form>
            {% endif %}
        </li>
    {% endfor %}
</ul>

{% if is_teacher %}
    <div class="mt-4 text-center">
        <a href="{% url 'add_post' %}" class="btn btn-primary">Додати пост</a>
    </div>
{% else %}
    <p class="text-center text-muted mt-4">Ви не маєте доступу до цієї функції.</p>
{% endif %}

<script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.11.8/dist/umd/popper.min.js" integrity="sha384-I7E8VVD/ismYTF4hNIPjVp/Zjvgyol6VFvRkX/vR+Vc4jQkC+hVqc2pM8ODewa9r" crossorigin="anonymous"></script>
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.min.js" integrity="sha384-0pUGZvbkm6XF6gxjEnlmuGrJXVbNuzT9qBBavbLwCsOGabYfZo0T0to5eqruptLy" crossorigin="anonymous"></script>

{% endblock %}

